{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{ktBx:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return ne}));var l=n(\"cxan\"),r=n(\"Czhu\"),i=n(\"ERkP\"),o=n(\"rkyN\"),s=n(\"J8OT\"),c=n(\"J3Wx\"),a=(n(\"97Jx\"),n(\"m3Bd\"),n(\"s3d4\"));const d=Object(a.a)(Object(i.createElement)(i.Fragment,null,Object(i.createElement)(\"circle\",{cx:12,cy:12,r:10}),Object(i.createElement)(\"polyline\",{points:\"12 16 16 12 12 8\"}),Object(i.createElement)(\"line\",{x1:8,y1:12,x2:16,y2:12})),\"ArrowRightCircleIcon\");var u=n(\"+C6t\"),b=n(\"olln\"),f=n(\"yTkC\"),p=n(\"x8tt\"),O=n(\"HbGN\"),j=n(\"oGee\"),g=(n(\"KEM+\"),n(\"qfee\"),n(\"UgQ6\"),n(\"3jXu\")),m=n(\"BO4l\"),h=n(\"ALBq\"),y=(n(\"RxMK\"),n(\"d01W\")),v=(n(\"rjhH\"),n(\"q9nS\")),k=n(\"Ax7X\"),S=n(\"ZP4Z\"),C=(n(\"4/oc\"),n(\"eecF\"));const w=Object(a.a)(Object(i.createElement)(\"polyline\",{points:\"6 9 12 15 18 9\"}),\"ChevronDownIcon\"),$=Object(a.a)(Object(i.createElement)(\"polyline\",{points:\"20 6 9 17 4 12\"}),\"CheckIcon\");var x=n(\"x2tH\"),q=n(\"BGTi\");function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const _=({isDisabled:e,isFocused:t,isSelected:n})=>{const l=Object(c.l)({size:\"medium\",type:\"radio\"});return Object(s.n)(\"div\",{className:`${e?\"disabled \":\"\"}${t?\"focus \":\"\"}${n?\"selected\":\"\"}`,css:{alignItems:\"center\",backgroundColor:l.background,borderColor:l.borderColor,borderRadius:l.borderRadius,borderStyle:\"solid\",borderWidth:l.borderWidth,boxSizing:\"border-box\",color:l.foreground,cursor:\"pointer\",display:\"flex\",flexShrink:0,height:l.boxSize,justifyContent:\"center\",transition:l.transition,width:l.boxSize,\"&.focus\":{backgroundColor:l.focus.background,borderColor:l.focus.borderColor,boxShadow:l.focus.shadow,color:l.focus.foreground},\"&.selected\":{backgroundColor:l.selected.background,borderColor:l.selected.borderColor,boxShadow:l.selected.shadow,color:l.selected.foreground},\"&.disabled\":{backgroundColor:l.disabled.background,borderColor:l.disabled.borderColor,boxShadow:l.disabled.shadow,color:l.disabled.background,cursor:\"default\"},\"&.selected.disabled\":{color:l.disabled.foreground}}},Object(s.n)($,{size:\"small\"}))},D=({children:e,isDisabled:t,innerProps:n,innerRef:r,className:i})=>{const o=Object(s.t)();return Object(s.n)(\"div\",Object(l.a)({ref:r,className:i,css:{alignItems:\"center\",color:t?o.colors.foregroundDim:void 0,cursor:\"pointer\",display:\"flex\",fontSize:\"0.9em\",fontWeight:500,justifyContent:\"space-between\",outline:0,padding:o.spacing.small+\"px 0\",pointerEvents:t?\"none\":void 0,\"&:not(:first-of-type)\":{borderTop:\"1px solid \"+o.colors.backgroundDim}}},n),e)},E={Control:e=>{let{selectProps:t}=e,n=Object(O.a)(e,[\"selectProps\"]);return t.shouldDisplaySearchControl?Object(s.n)(x.f.Control,Object(l.a)({selectProps:t},n)):Object(s.n)(\"div\",{css:{border:0,clip:\"rect(1px, 1px, 1px, 1px)\",height:1,overflow:\"hidden\",padding:0,position:\"absolute\",whiteSpace:\"nowrap\",width:1}},Object(s.n)(x.f.Control,Object(l.a)({selectProps:t},n)))},Option:D,DropdownIndicator:null,IndicatorSeparator:null},N=e=>{let{components:t}=e,n=Object(O.a)(e,[\"components\"]);const r=Object(i.useMemo)(()=>P(P({},E),t),[t]),o=Object(s.t)(),c=Object(i.useMemo)(()=>({control:e=>P(P({},e),{},{background:o.fields.inputBackground,boxShadow:\"none\",cursor:\"text\",padding:0,minHeight:34}),menu:()=>({marginTop:8}),menuList:e=>P(P({},e),{},{padding:0}),placeholder:e=>P(P({},e),{},{color:o.fields.inputPlaceholder})}),[o]);return Object(s.n)(q.a,Object(l.a)({backspaceRemovesValue:!1,captureMenuScroll:!1,closeMenuOnSelect:!1,controlShouldRenderValue:!1,hideSelectedOptions:!1,isClearable:!1,isSearchable:true,maxMenuHeight:1e3,menuIsOpen:!0,menuShouldScrollIntoView:!1,shouldDisplaySearchControl:true,styles:c,tabSelectsValue:!1,components:r},n))},F=Object(a.a)(Object(i.createElement)(\"polyline\",{points:\"15 18 9 12 15 6\"}),\"ChevronLeftIcon\");var M=n(\"DAgO\"),R=n(\"35je\");n(\"yUr7\"),n(\"z3d9\"),n(\"6tix\"),n(\"b2e3\");function B(e,t){const{query:n}=Object(m.useRouter)(),l=\"string\"===typeof n.fields?n.fields:\"\";return Object(i.useMemo)(()=>{let n=(l?l.split(\",\"):e.initialColumns).filter(e=>\"read\"===t[e]);return new Set(0===n.length?[e.labelField]:n)},[e,l,t])}const T={Option:e=>Object(s.n)(D,e,e.children,Object(s.n)(_,{isDisabled:e.isDisabled,isFocused:e.isFocused,isSelected:e.isSelected}))};function K({list:e,fieldModesByFieldPath:t}){const n=Object(m.useRouter)(),i=B(e,t),c=[];return Object.keys(t).forEach(n=>{\"read\"===t[n]&&c.push({value:n,label:e.fields[n].label,isDisabled:1===i.size&&i.has(n)})}),Object(s.n)(h.a,{triggerRenderer:({triggerProps:e})=>Object(s.n)(o.a,Object(l.a)({weight:\"link\",css:{padding:4}},e),Object(s.n)(\"span\",{css:{display:\"inline-flex\",justifyContent:\"center\",alignItems:\"center\"}},i.size,\" column\",1===i.size?\"\":\"s\",\" \",Object(s.n)(w,{size:\"smallish\"})))},Object(s.n)(\"div\",{css:{width:320}},Object(s.n)(s.a,{padding:\"medium\"},Object(s.n)(N,{onChange:t=>{Array.isArray(t)&&(t=>{if(function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,e.initialColumns)){const e=n.query,t=Object(O.a)(e,[\"fields\"]);n.push({query:t})}else n.push({query:Object(r.a)(Object(r.a)({},n.query),{},{fields:t.join(\",\")})})})(t.map(e=>e.value))},isMulti:!0,value:c.filter(e=>i.has(e.value)),options:c,components:T}))))}const A={Option:e=>{let{children:t}=e,n=Object(O.a)(e,[\"children\"]),l=Object(s.t)(),r=n.isFocused?l.colors.foreground:l.colors.foregroundDim;return Object(s.n)(D,n,Object(s.n)(\"span\",null,t),Object(s.n)(\"div\",{css:{alignItems:\"center\",display:\"flex\",height:24,justifyContent:\"center\",width:24}},Object(s.n)(y.a,{css:{color:r}})))}};function L({listKey:e}){const{isOpen:t,setOpen:n,trigger:r,dialog:c,arrow:a}=Object(h.c)({placement:\"bottom\",modifiers:[{name:\"offset\",options:{offset:[0,8]}}]});return Object(s.n)(i.Fragment,null,Object(s.n)(o.a,Object(l.a)({tone:\"active\",size:\"small\"},r.props,{ref:r.ref,onClick:()=>n(!0)}),Object(s.n)(s.a,{as:\"span\",marginRight:\"xsmall\"},\"Filter List\"),Object(s.n)(w,{size:\"small\"})),Object(s.n)(h.b,Object(l.a)({arrow:a,isVisible:t},c.props,{ref:c.ref}),t&&Object(s.n)(V,{onClose:()=>{n(!1)},listKey:e})))}function V({onClose:e,listKey:t}){const n=Object(g.c)(t),l=Object(m.useRouter)(),a=Object(i.useMemo)(()=>{const e={};return Object.keys(n.fields).forEach(t=>{const l=n.fields[t];l.controller.filter&&(e[t]=l)}),e},[n.fields]),d=Object(i.useMemo)(()=>{const e={};return Object.keys(a).forEach(t=>{const n=a[t];let r=!1;const i={};Object.keys(n.controller.filter.types).forEach(e=>{void 0===l.query[`!${t}_${e}`]&&(r=!0,i[e]=n.controller.filter.types[e].label)}),r&&(e[t]=i)}),e},[l.query,a]),[u,b]=Object(i.useState)({kind:\"selecting-field\"});return Object(s.n)(s.j,{padding:\"medium\",as:\"form\",css:{minWidth:320},onSubmit:t=>{t.preventDefault(),\"filter-value\"===u.kind&&(l.push({query:Object(r.a)(Object(r.a)({},l.query),{},{[`!${u.fieldPath}_${u.filterType}`]:JSON.stringify(u.filterValue)})}),e())},gap:\"small\"},Object(s.n)(\"div\",{css:{position:\"relative\"}},\"selecting-field\"!==u.kind&&Object(s.n)(\"button\",{onClick:()=>{b({kind:\"selecting-field\"})},css:{border:0,background:\"transparent\",cursor:\"pointer\",position:\"absolute\"}},Object(s.n)(s.l,null,\"Back\"),Object(s.n)(F,{size:\"smallish\"})),Object(s.n)(s.g,{textAlign:\"center\",type:\"h5\"},(()=>{switch(u.kind){case\"selecting-field\":return\"Filter\";case\"filter-value\":return n.fields[u.fieldPath].label}})())),Object(s.n)(s.d,null),\"selecting-field\"===u.kind&&Object(s.n)(N,{components:A,onChange:e=>{const t=e.value,n=Object.keys(d[t])[0];b({kind:\"filter-value\",fieldPath:t,filterType:n,filterValue:a[t].controller.filter.types[n].initialValue})},options:Object.keys(d).map(e=>({label:a[e].label,value:e}))}),\"filter-value\"===u.kind&&Object(s.n)(c.h,{width:\"full\",value:{value:u.filterType,label:d[u.fieldPath][u.filterType]},onChange:e=>{e&&b({kind:\"filter-value\",fieldPath:u.fieldPath,filterValue:a[u.fieldPath].controller.filter.types[e.value].initialValue,filterType:e.value})},options:Object.keys(d[u.fieldPath]).map(e=>({label:d[u.fieldPath][e],value:e}))}),\"filter-value\"==u.kind&&(()=>{const{Filter:e}=a[u.fieldPath].controller.filter;return Object(s.n)(e,{type:u.filterType,value:u.filterValue,onChange:e=>{b(t=>Object(r.a)(Object(r.a)({},t),{},{filterValue:e}))}})})(),\"filter-value\"==u.kind&&Object(s.n)(\"div\",{css:{display:\"flex\",justifyContent:\"space-between\"}},Object(s.n)(o.a,{onClick:e},\"Cancel\"),Object(s.n)(o.a,{type:\"submit\"},\"Apply\")))}function W({filters:e,list:t}){return Object(s.n)(s.h,{gap:\"small\"},e.map(e=>{const n=t.fields[e.field];return Object(s.n)(J,{key:`${e.field}_${e.type}`,field:n,filter:e})}))}function J({filter:e,field:t}){const n=Object(m.useRouter)(),{isOpen:r,setOpen:o,trigger:c,dialog:a,arrow:d}=Object(h.c)({placement:\"bottom\",modifiers:[{name:\"offset\",options:{offset:[0,8]}}]}),u=t.controller.filter.Label;return Object(s.n)(i.Fragment,null,Object(s.n)(R.a,Object(l.a)({onClick:()=>{o(!0)}},c.props,{ref:c.ref,weight:\"light\",tone:\"passive\",onRemove:()=>{const t=n.query,l=`!${e.field}_${e.type}`,r=Object(O.a)(t,[l].map(M.a));n.push({query:r})}}),t.label,\" \",Object(s.n)(u,{label:t.controller.filter.types[e.type].label,type:e.type,value:e.value})),Object(s.n)(h.b,Object(l.a)({arrow:d},a.props,{ref:a.ref,isVisible:r}),Object(s.n)(H,{onClose:()=>{o(!1)},field:t,filter:e})))}function H({filter:e,field:t,onClose:n}){const l=t.controller.filter.Filter,c=Object(m.useRouter)(),[a,d]=Object(i.useState)(e.value);return Object(s.n)(s.j,{as:\"form\",padding:\"small\",gap:\"small\",onSubmit:t=>{t.preventDefault(),c.push({query:Object(r.a)(Object(r.a)({},c.query),{},{[`!${e.field}_${e.type}`]:JSON.stringify(a)})}),n()}},Object(s.n)(l,{autoFocus:!0,type:e.type,value:a,onChange:d}),Object(s.n)(\"div\",{css:{display:\"flex\",justifyContent:\"space-between\"}},Object(s.n)(o.a,{onClick:n},\"Cancel\"),Object(s.n)(o.a,{type:\"submit\"},\"Save\")))}function G({page:e,currentPage:t}){const{query:n}=Object(m.useRouter)(),l=Object(r.a)(Object(r.a)({},n),{},{page:e});return 1===e&&delete l.page,Object(s.n)(v.a,{css:{textDecoration:t===e?\"none\":void 0,color:t===e?\"inherit\":void 0},href:{query:l}},e)}function Q({currentPage:e,total:t,pageSize:n,listKey:l}){const r=Object(g.c)(l);if(t<=n)return null;const i=[],o=Math.ceil(t/n);let c=1,a=o;if(5<o){const t=Math.floor(2.5);c=e-(t+1-1),a=e+t,c<1&&(a=5,c=1),a>o&&(c=o-5+1,a=o)}c>1&&i.push(Object(s.n)(G,{key:\"page_start\",currentPage:e,page:1}));for(let d=c;d<=a;d++)i.push(Object(s.n)(G,{key:d,page:d,currentPage:e}));return a<o&&i.push(Object(s.n)(G,{key:\"page_end\",page:o,currentPage:e})),Object(s.n)(s.b,null,Object(s.n)(s.j,{across:!0,gap:\"small\"},i),Object(s.n)(U,{currentPage:e,pageSize:n,plural:r.plural,singular:r.singular,total:t}))}function U({currentPage:e,pageSize:t,plural:n,singular:l,total:r}){if(!r)return Object(s.n)(\"span\",null,\"No \",n);let i=\"\";const o=t*(e-1)+1,c=Math.min(o+t-1,r);return r>t?i=`${o} to ${c} of ${r} ${n}`:(i=r+\" \",r>1&&n?i+=n:1===r&&l&&(i+=l)),Object(s.n)(\"span\",null,\"Showing \",Object(s.n)(\"strong\",null,i))}function X(e){const{query:t}=Object(m.useRouter)();let n=\"string\"===typeof t.sortBy?t.sortBy:\"\";return Object(i.useMemo)(()=>{if(\"\"===n)return e.initialSort;let t=\"ASC\",l=n;return\"-\"===n.charAt(0)&&(l=n.substr(1),t=\"DESC\"),e.fields[l].isOrderable?{field:l,direction:t}:null},[n,e])}function Z({list:e}){const t=X(e),{isOpen:n,setOpen:r,trigger:c,dialog:a,arrow:d}=Object(h.c)({placement:\"bottom\",modifiers:[{name:\"offset\",options:{offset:[0,8]}}]});return Object(s.n)(i.Fragment,null,Object(s.n)(o.a,Object(l.a)({},c.props,{weight:\"link\",css:{padding:4},ref:c.ref,onClick:()=>r(!0)}),Object(s.n)(\"span\",{css:{display:\"inline-flex\",justifyContent:\"center\",alignItems:\"center\"}},t?`${e.fields[t.field].label} ${{ASC:\"ascending\",DESC:\"descending\"}[t.direction]}`:\"No field\",Object(s.n)(w,{size:\"smallish\"}))),Object(s.n)(h.b,Object(l.a)({arrow:d,isVisible:n},a.props,{ref:a.ref}),n&&Object(s.n)(ee,{onClose:()=>{r(!1)},list:e})))}const Y={label:\"No field\",value:\"___________NO_FIELD___________\"};function ee({onClose:e,list:t}){const n=X(t),l=Object(m.useRouter)();return Object(s.n)(s.j,{padding:\"medium\",css:{minWidth:320},gap:\"small\"},Object(s.n)(\"div\",{css:{position:\"relative\"}},Object(s.n)(s.g,{textAlign:\"center\",type:\"h5\"},\"Sort\")),Object(s.n)(s.d,null),Object(s.n)(N,{value:n?{label:t.fields[n.field].label,value:n.field}:Y,components:T,onChange:t=>{const i=t.value;if(i===Y.value){const e=l.query,t=Object(O.a)(e,[\"sortBy\"]);l.push({query:t})}else l.push({query:Object(r.a)(Object(r.a)({},l.query),{},{sortBy:(null===n||void 0===n?void 0:n.field)===i&&\"ASC\"===n.direction?\"-\"+n.field:i})});e()},options:Object.keys(t.fields).filter(e=>t.fields[e].isOrderable).map(e=>({label:t.fields[e].label,value:e})).concat(Y)}))}let te=p.gql`\n  query($listKey: String!) {\n    keystone {\n      adminMeta {\n        list(key: $listKey) {\n          hideDelete\n          hideCreate\n          fields {\n            path\n            listView {\n              fieldMode\n            }\n          }\n        }\n      }\n    }\n  }\n`;const ne=({listKey:e})=>{var t,n,l,o,c;const a=Object(g.c)(e),{query:d}=Object(m.useRouter)();!function(e){const t=Object(m.useRouter)(),n=`keystone.list.${e}.list.page.info`;Object(i.useEffect)(()=>{if(!Object.keys(t.query).some(e=>e.startsWith(\"!\")||\"page\"===e||\"pageSize\"===e||\"fields\"===e)){const l=localStorage.getItem(n);let i;try{i=JSON.parse(l)}catch(e){}i&&t.replace({query:Object(r.a)(Object(r.a)({},t.query),i)})}},[n]),Object(i.useEffect)(()=>{let n={};Object.keys(t.query).forEach(e=>{(e.startsWith(\"!\")||\"page\"===e||\"pageSize\"===e||\"fields\"===e)&&(n[e]=t.query[e])}),Object.keys(n).length?localStorage.setItem(`keystone.list.${e}.list.page.info`,JSON.stringify(n)):localStorage.removeItem(`keystone.list.${e}.list.page.info`)},[n,t])}(e);let b=\"string\"!==typeof d.page||Number.isNaN(parseInt(d.page))?1:Number(d.page),f=\"string\"!==typeof d.pageSize||Number.isNaN(parseInt(d.pageSize))?a.pageSize:parseInt(d.pageSize);const O=X(a),j=function(e){const{query:t}=Object(m.useRouter)(),n=Object(i.useMemo)(()=>{const t={};return Object.entries(e.fields).forEach(([e,n])=>{n.controller.filter&&Object.keys(n.controller.filter.types).forEach(n=>{t[`!${e}_${n}`]={type:n,field:e}})}),t},[e]);return Object(i.useMemo)(()=>{let l=[];Object.keys(t).forEach(e=>{const i=n[e],o=t[e];if(i&&\"string\"===typeof o){let e;try{e=JSON.parse(o)}catch(s){}void 0!==o&&l.push(Object(r.a)(Object(r.a)({},i),{},{value:e}))}});let i={};return l.forEach(t=>{Object.assign(i,e.fields[t.field].controller.filter.graphql({type:t.type,value:t.value}))}),{filters:l,where:i}},[t,n,e])}(a);let h=Object(p.useQuery)(te,{variables:{listKey:e}}),y=Object(i.useMemo)(()=>{var e,t;let n={};return null===(e=h.data)||void 0===e||null===(t=e.keystone.adminMeta.list)||void 0===t||t.fields.forEach(e=>{n[e.path]=e.listView.fieldMode}),n},[null===(t=h.data)||void 0===t||null===(n=t.keystone.adminMeta.list)||void 0===n?void 0:n.fields]),v=B(a,y),{data:S,error:w,refetch:$,loading:x}=Object(p.useQuery)(Object(i.useMemo)(()=>{let e=[...v].map(e=>a.fields[e].controller.graphqlSelection).join(\"\\n\");return p.gql`\n      query ($where: ${a.gqlNames.whereInputName}, $first: Int!, $skip: Int!, $sortBy: [${a.gqlNames.listSortName}!]) {\n        items: ${a.gqlNames.listQueryName}(where: $where,first: $first, skip: $skip, sortBy: $sortBy) {\n          ${v.has(\"id\")?\"\":\"id\"}\n          ${e}\n        }\n        meta: ${a.gqlNames.listQueryMetaName}(where: $where) {\n          count\n        }\n      }\n    `},[a,v]),{fetchPolicy:\"cache-and-network\",errorPolicy:\"all\",variables:{where:j.where,first:f,skip:(b-1)*f,sortBy:O?[`${O.field}_${O.direction}`]:void 0}}),[q,z]=Object(i.useState)({data:S,error:w});S&&q.data!==S&&z({data:S,error:w});const{data:I,error:P}=q,_=Object(C.d)(I,null===P||void 0===P?void 0:P.graphQLErrors),[D,E]=Object(i.useState)(()=>({itemsFromServer:void 0,selectedItems:new Set}));if(I&&I.items&&D.itemsFromServer!==I.items){const e=new Set;I.items.forEach(t=>{D.selectedItems.has(t.id)&&e.add(t.id)}),E({itemsFromServer:I.items,selectedItems:e})}const N=Object(s.t)(),F=!(null===(l=null===(o=h.data)||void 0===o||null===(c=o.keystone.adminMeta.list)||void 0===c?void 0:c.hideCreate)||void 0===l||l)||null;return Object(s.n)(k.c,{header:Object(s.n)(re,{listKey:e})},h.error?\"Error...\":I&&h.data?Object(s.n)(i.Fragment,null,Object(s.n)(s.j,{across:!0,gap:\"medium\",align:\"center\",marginTop:\"xlarge\"},F&&Object(s.n)(le,{listKey:e}),I.meta.count||j.filters.length?Object(s.n)(L,{listKey:e}):null,j.filters.length?Object(s.n)(W,{filters:j.filters,list:a}):null),I.meta.count?Object(s.n)(i.Fragment,null,Object(s.n)(ie,null,(()=>{const e=D.selectedItems,t=e.size;var n,l,r;return t?Object(s.n)(i.Fragment,null,Object(s.n)(\"span\",{css:{marginRight:N.spacing.small}},\"Selected \",t,\" of \",I.items.length),!(null===(n=null===(l=h.data)||void 0===l||null===(r=l.keystone.adminMeta.list)||void 0===r?void 0:r.hideDelete)||void 0===n||n)&&Object(s.n)(se,{list:a,selectedItems:e,refetch:$})):Object(s.n)(i.Fragment,null,Object(s.n)(U,{currentPage:b,pageSize:f,plural:a.plural,singular:a.singular,total:I.meta.count}),\", sorted by \",Object(s.n)(Z,{list:a}),\"with\",\" \",Object(s.n)(K,{list:a,fieldModesByFieldPath:y}),\" \",x&&Object(s.n)(u.a,{label:\"Loading item data\",size:\"small\",tone:\"active\"}))})()),Object(s.n)(ce,{count:I.meta.count,currentPage:b,itemsGetter:_.get(\"items\"),listKey:e,pageSize:f,selectedFields:v,sort:O,selectedItems:D.selectedItems,onSelectedItemsChange:e=>{E({itemsFromServer:D.itemsFromServer,selectedItems:e})}})):Object(s.n)(ie,null,\"No \",a.plural,\" found.\")):Object(s.n)(s.b,{css:{height:`calc(100vh - ${k.b}px)`}},Object(s.n)(u.a,{label:\"Loading item data\",size:\"large\",tone:\"passive\"})))},le=({listKey:e})=>{const t=Object(g.c)(e),n=Object(m.useRouter)(),[l,r]=Object(i.useState)(!1);return Object(s.n)(i.Fragment,null,Object(s.n)(o.a,{disabled:l,onClick:()=>{r(!0)},tone:\"active\",size:\"small\",weight:\"bold\"},\"Create \",t.singular),Object(s.n)(b.c,{isOpen:l},Object(s.n)(S.a,{listKey:e,onCreate:({id:e})=>{n.push(`/${t.path}/[id]`,`/${t.path}/${e}`)},onClose:()=>{r(!1)}})))},re=({listKey:e})=>{const t=Object(g.c)(e);return Object(s.n)(i.Fragment,null,Object(s.n)(\"div\",{css:{alignItems:\"center\",display:\"flex\",flex:1,justifyContent:\"space-between\"}},Object(s.n)(s.g,{type:\"h3\"},t.label)))},ie=({children:e})=>Object(s.n)(\"p\",{css:{minHeight:38,display:\"flex\",alignItems:\"center\"}},e),oe=({direction:e})=>Object(s.n)(\"span\",{css:{borderLeft:\"0.25em solid transparent\",borderRight:\"0.25em solid transparent\",borderTop:\"0.25em solid\",display:\"inline-block\",height:0,marginLeft:\"0.33em\",marginTop:\"-0.125em\",verticalAlign:\"middle\",width:0,transform:`rotate(${\"DESC\"===e?\"0deg\":\"180deg\"})`}});function se({selectedItems:e,list:t,refetch:n}){const[l,r]=Object(p.useMutation)(Object(i.useMemo)(()=>p.gql`\n  mutation($ids: [ID!]!) {\n    ${t.gqlNames.deleteManyMutationName}(ids: $ids) {\n      id\n    }\n  }\n`,[t,e])),[c,a]=Object(i.useState)(!1),d=Object(f.b)();return Object(s.n)(i.Fragment,null,Object(s.n)(o.a,{isLoading:r.loading,tone:\"negative\",onClick:async()=>{a(!0)}},\"Delete\"),Object(s.n)(b.a,{isOpen:c,title:\"Delete Confirmation\",tone:\"negative\",actions:{confirm:{label:\"Delete\",action:async()=>{await l({variables:{ids:[...e]}}).catch(e=>{d.addToast({title:\"Failed to delete items\",message:e.message,tone:\"negative\"})}),d.addToast({title:\"Deleted items successfully\",tone:\"positive\"}),n()}},cancel:{label:\"Cancel\",action:()=>{a(!1)}}}},\"Are you sure you want to delete \",e.size,\" \",1===e.size?t.singular:t.plural,\"?\"))}function ce({selectedFields:e,listKey:t,itemsGetter:n,count:l,sort:i,currentPage:o,pageSize:a,selectedItems:u,onSelectedItemsChange:b}){var f,p;const O=Object(g.c)(t),{query:h}=Object(m.useRouter)(),y=!O.fields[e.keys().next().value].views.Cell.supportsLinkTo;return Object(s.n)(s.a,{paddingBottom:\"xlarge\"},Object(s.n)(ae,null,Object(s.n)(\"colgroup\",null,Object(s.n)(\"col\",{width:\"30\"}),y&&Object(s.n)(\"col\",{width:\"30\"}),[...e].map(e=>Object(s.n)(\"col\",{key:e}))),Object(s.n)(de,null,Object(s.n)(ue,{css:{paddingLeft:0}},Object(s.n)(\"label\",{css:{display:\"flex\",alignItems:\"center\",justifyContent:\"start\",cursor:\"pointer\"}},Object(s.n)(c.b,{size:\"small\",checked:u.size===(null===(f=n.data)||void 0===f?void 0:f.length),css:{cursor:\"default\"},onChange:()=>{var e;const t=new Set;var l;u.size!==(null===(e=n.data)||void 0===e?void 0:e.length)&&(null===(l=n.data)||void 0===l||l.forEach(e=>{null!==e&&null!==e.id&&t.add(e.id)}));b(t)}}))),y&&Object(s.n)(ue,null),[...e].map(e=>{const t=O.fields[e].label;return O.fields[e].isOrderable?Object(s.n)(ue,{key:e},Object(s.n)(v.a,{css:{display:\"block\",textDecoration:\"none\",color:\"inherit\",\":hover\":{color:\"inherit\"}},href:{query:Object(r.a)(Object(r.a)({},h),{},{sortBy:(null===i||void 0===i?void 0:i.field)===e&&\"ASC\"===i.direction?\"-\"+e:e})}},t,(null===i||void 0===i?void 0:i.field)===e&&Object(s.n)(oe,{direction:i.direction}))):Object(s.n)(ue,{key:e},t)})),Object(s.n)(\"tbody\",null,(null!==(p=n.data)&&void 0!==p?p:[]).map((t,l)=>{const r=n.get(l);if(null===r.data||null===r.data.id)return r.errors?Object(s.n)(\"tr\",{css:{color:\"red\"},key:\"index:\"+l},r.errors[0].message):null;const i=r.data.id;return Object(s.n)(\"tr\",{key:i||\"index:\"+l},Object(s.n)(be,null,Object(s.n)(\"label\",{css:{display:\"flex\",minHeight:38,alignItems:\"center\",justifyContent:\"start\"}},Object(s.n)(c.b,{size:\"small\",checked:u.has(i),css:{cursor:\"default\"},onChange:()=>{const e=new Set(u);u.has(i)?e.delete(i):e.add(i),b(e)}}))),y&&Object(s.n)(be,null,Object(s.n)(v.a,{css:{textDecoration:\"none\",minHeight:38,display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},href:`/${O.path}/[id]`,as:`/${O.path}/${encodeURIComponent(i)}`},Object(s.n)(d,{size:\"smallish\",\"aria-label\":\"Go to item\"}))),[...e].map((e,t)=>{const n=O.fields[e];let{Cell:l}=O.fields[e].views;const o={};for(const c of Object(C.c)(n.controller)){const n=r.get(c);if(n.errors){const r=n.errors[0].message;return Object(s.n)(be,{css:{color:\"red\"},key:e},0===t&&l.supportsLinkTo?Object(s.n)(j.a,{href:`/${O.path}/[id]`,as:`/${O.path}/${encodeURIComponent(i)}`},r):r)}o[c]=n.data}return Object(s.n)(be,{key:e},Object(s.n)(l,{field:n.controller,item:o,linkTo:0===t&&l.supportsLinkTo?{href:`/${O.path}/[id]`,as:`/${O.path}/${encodeURIComponent(i)}`}:void 0}))}))}))),Object(s.n)(Q,{listKey:t,total:l,currentPage:o,pageSize:a}))}const ae=({children:e})=>Object(s.n)(\"table\",{css:{minWidth:\"100%\",tableLayout:\"fixed\",\"tr:last-child td\":{borderBottomWidth:0}},cellPadding:\"0\",cellSpacing:\"0\"},e),de=({children:e})=>Object(s.n)(\"thead\",null,Object(s.n)(\"tr\",null,e)),ue=e=>{const{colors:t,spacing:n,typography:r}=Object(s.t)();return Object(s.n)(\"th\",Object(l.a)({css:{backgroundColor:t.background,borderBottom:\"2px solid \"+t.border,color:t.foregroundDim,fontSize:r.fontSize.medium,fontWeight:r.fontWeight.medium,padding:n.small,textAlign:\"left\",position:\"sticky\",top:0}},e))},be=e=>{const{colors:t,typography:n}=Object(s.t)();return Object(s.n)(\"td\",Object(l.a)({css:{borderBottom:\"1px solid \"+t.border,fontSize:n.fontSize.medium}},e))}}}]);","extractedComments":[]}